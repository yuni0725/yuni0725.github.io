---
title: (상산고도서관)기획과 개발
date: 2025-05-26 22:20:00 +09:00
categories: [상산고도서관, 프론트엔드, 백엔드]
tags: 
  [
    상산고도서관,
    프론트엔드,
    백엔드
  ]
---
## 들어가면서...
- 2학년때, 도서관을 이용하면서 조금 불편함을 느낀게 검색 시스템이 이상하다. 카테고리 분류도 이상하고 웹사이트는 또 엄청 느려서 보기도 힘들다. 그래서 이걸 해결하는걸 3학년때 만들어보려고 했다. 이걸 담임쌤께 말씀드렸더니 오 좋은거 같다라고 하셔서 그대로 묵혀두고 있었는데...올해 2학년 담임선생님은 학교 도서관장이 되셨다. 어느날 도서관에 놀러갔는데 이 프로젝트를 진행 시켜보자고 하셨다. 그래서 상산고 도서관에서 사용할 웹사이트를 만들게 되었다. ~~(이때 도망쳤어야했는데)~~

## 노마드코더
- 사실 그냥이였으면 안했는데 마침 내 개발 스승, 모두의 개발 스승님께서 새로운 강의를 출시하셨다. [Maker 마스터클래스](https://nomadcoders.co/maker-masterclass)였다. 여기서 배우는 것은 실제 프로덕션으로 빌드까지 가능할 정도의 프로젝트를 쓸 수 있는 모든 도구를 사용해 효율적으로 만들어보는 것이다. 딱 나에게 필요했던 강의였다.

## 기술 스택
- 만들때 쓴 기술 스택은 프론트엔드로 react-router(구 Remix, 현 React-router-v7)이다. 강의에서는 백엔드로는 Supabase로 사용했는데 사실 난 SQL을 몰랐다. (약간 사고) 그치만 어떻게든 되겠지 하고 SQL은 따로 공부해야지 하고 넘어갔다. (이때는 몰랐다 Supabase는 엄청난것이였따...)

## 프론트엔드
- #### 디자인
   사실 난 디자인에 잼병이다. 그래서 `ShadcnUI`을 활용했다. 이게 또 좋은게 미리 지정된 스타일이 있고 원한다면 내가 다 뜯어 고칠 수 있다는게 장점이다.
- #### Remix는 엄청나다
   나는 왜 굳이굳이 NextJS을 냅두고 React-Router로 개발하는지 이해를 못했는데 react-router는 미쳤다. 엄청난 기능들이 있었다. 제일 편했던 점은 Loader, Action Function의 리턴값의 타입을 지정하지 않아도 된다!! 내가 하는게 아니라 Remix에서 자동으로 처리해서 이걸 컴포넌트에 보여준다. 솔직히 개발하면서 interface을 쓴 적이 많이 없었던거 같다. 아래는 Remix 생태계에서 중요한 함수들이다. 
  - Loader function : 보통 웹사이트의 `GET` 로직을 해결해주는 친구이다. GET 요청이 오면 이 Loader Function이 실행된다
  - Action function : `PUT`, `DELETE`, `POST` 로직을 해결해준다. 사실 `PUT`이랑 `DELETE`는 많이 안써봤는데 `POST` 요청할때 겁나 편하다
  - `Form` : 이것도 아주 멋진게 Form을 활용하면 귀찮은 작업들을 안해주고 지 알아서 action function도 설정해주고 아주 편하다. 게다가 Form에 입력하는 값 모두 name을 설정하면 action function에서 손쉽게 접근 가능하다. 

## 백엔드
- #### 학교 도서관 책들
  - 하 이 프로젝트에서 제일 문제인 부분이였다. 난 학교 도서관에 `40년 전 존 로크의 통치론 초판`이 있다는 사실을 알고 싶지 않았다. 책들을 스크래핑할때 ISBN 코드 기반으로 카카오랑 알라딘 API을 호출해야한다. 근데 오래된 책은 ISBN 코드가 없었다....
  - 해결 : 원래 같이 하던 조원이 있었는데 조원이랑 같이 상의해보다 그냥 날리기로 했다. 거의 2만권에서 1만권으로 반토막이나 났다. 어쨋든 뭐 여차저차해서 결국 잘 올렸다. 

- #### Supabase & SQL & Drizzle
  - Drizzle : 개발자들은 SQL을 싫어한다. 이건 나만 그런줄 알았는데 다들 그런거 같다. 그래서 만든 것이 `ORM(Object Relational Mapping)`이다. 이것만 있으면 SQL을 안쓰고도 type-checking을 하면서 데이터베이스를 짤 수 있다 
  - Supabase : Supabase는 아주 멋지다. 솔직히 이거 장고로 만들었으면 아직도 완성 못했을 수도 있겠다 싶은게 Supabase가 간단하게 해주는게 너무 많다. 소셜 로그인이라든가 등등 이런게 너무 잘되어 있고 심지어 무료이다...

## 기능 
- 일단 크게 총 3가지 탭으로 나뉜다
- #### 검색
  - 검색은 말그대로 검색할 수 있는 곳이다. 이때 만든게 정렬 시스템인데 검색 결과를 정렬하는 부분을 만들었다. 제목, 저자, 줄거리에 대한 검색 선택, 별점순, 북마크순, 리뷰수 순에 대한 정렬도 만들었다. `조건 열기` 버튼을 누르면 접혀져 있다가 아래로 펼쳐지는건 지금 생각해도 잘 만든거 같다. 
  
- #### 추천
  - 추천탭은 내가 북마크한 책들을 바탕으로 추천을 해주는 기능이다. 여기서 `vercel-ai` 패키지를 썻는데 이게 또 좋은게 웬만한 모든 LLM들을 다 연동해놔서 내가 한건 프롬프팅 밖에 없는거 같다. 근데 추천 성능이 쓰레기라 나중에 좀 고쳐야겠다.
  
- #### 책
  - 책 탭은 책의 세부 사항을 보여준다. 사실 이건 비밀인데 `Cursor`한테 디자인을 해달라고 했더니 생각보다 디자인을 잘해줬다. 그래서 그냥 이거 그대로 썻다
  - 그리고 책 탭에서 가장 신경 쓴 부분은 리뷰 달기이다. 리뷰 달기는 별점을 주기 위한 컴포넌트를 찾아다녔지만...결국 다 실패하고 내가 만들었다. 
  - 제일 고생했던 북마크 기능은 다소 황당하게 완성했다. 원래 이걸 구현하려고 별의 별 짓을 다했다. 이미 리뷰를 쓰느라 action function이 리뷰와 관련된 로직으로 가득차있는데 북마크에서 새로운 `POST` 요청을 때리면 리뷰와 관련된 로직을 다 바꿔야한다. 
  - 알고보니까 이걸 해결하기 위해 다른 주소에 `POST`요청을 해주는 `useFetcher`가 있었다. 멋진 Remix...물론 3시간동안 머리 싸매다가 1시간만에 useFetcher을 사용해서 끝내니까 좀 허무했다...이러면서 배우는거지 뭐
  
- ## Cusor
  - 이 프로젝트는 전적으로 커서가 있었기에 가능했다. 커서는 AI 코드 Idle인데 Vscode을 fork한 프로젝트라서 extension이 그대로 지원되는것도 아주 좋은거 같다. 또 빠르게 인라인에서 AI가 코드를 짜주는 기능, AI chat, 마지막으로 제일 좋은 Tab 기능은 생산성을 엄청 향상 시켜주는거 같다. 귀찮은건 얘가 다 알아서 해준다. 결제한게 안아까울정도로 지금 잘 쓰고 있다. 심지어 고급 모델들도 커서에서 한번만 결제하면 다 쓸 수 있는것도 장점인거 같다. 
  
## 소감
- 어쩌다보니 프로젝트가 엄청 커졌다
- 사실 웹사이트는 만들기는 쉽지만 유지보수가 너무 어렵다. 지금은 베타 테스터고 다른 사람들의 의견을 받고 있다. 
- 덕분에 엄청나게 많은 수정사항이 있다. 대충 세보니 10여개 정도...언제 다하냐...

